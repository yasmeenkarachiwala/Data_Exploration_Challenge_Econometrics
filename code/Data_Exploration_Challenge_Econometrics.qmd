---
title: "Data_Exploration_Challenge"
format: html
editor: visual
---

## Quarto

Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.

## Running Code

When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:

```{r}
#Step 1 -- Loading the libraies 

library(tidyverse)
library(rio)
library(vtable)
library(fixest)
library(dplyr)
library(lubridate)
library(multcomp) 
# # Generalized Linear Hypothesis Test

```

```{r}
# reading the data
# As outlined in instructions to avoid the error in reading moving one level up y using ../
# dmy(Date) to convert it to correct date format 
walmart <- read.csv("../raw_data/Walmart_Sales (1).csv") %>% mutate(Date = dmy(Date))
str(walmart)
```

```{r}
# transforming the variables 
# Convert store as a binary variable 
# Convert weekly sales as logs 
walmart <- walmart %>% 
    mutate ( 
      Year = year(Date),
      Month = month(Date),
      YearMonth = floor_date(Date, "month"),
      Store = as.factor(Store),
      Holiday_Flag = as.factor(Holiday_Flag),
      log_sales = log(Weekly_Sales)
    ) %>% arrange(Store, Date)

```

```{r}
dim(walmart)
```

```{r}
# Check if the panel data is balanced, i.e each entity i.e store is represented for the same time period 
N <- n_distinct(walmart$Store)
T <- walmart %>% group_by(Store) %>% summarize(n = n()) %>% pull(n) %>% unique()
N*T == nrow(walmart)

```

```{r}

#EDA that informs the model
# Distribution of sales (motivation for log transform)
ggplot(walmart, aes(x= Weekly_Sales)) +
         geom_histogram(bins = 40) +
         scale_x_continuous(labels = dollar)+
         labs(title = 'Weekly_Sales are right-skewed -> log(Weekly_Sales) is reasonable',
         x = "Weekly_Sales", y= "Count")
```

```{r}
ggplot(walmart, aes(x=log_sales))+
       geom_histogram(bins = 40) +
       labs(title = "Distribution after log transform", 
          x= "log(Weekly_Sales)", y= "Count"
       )
  
```

```{r}
## Raw relationship: sales vs temperature (possible nonlinearity)

ggplot(walmart, aes(x= Temperature, y= log_sales))+
      geom_point(alpha = 0.15) +
      geom_smooth(method = "loess", se = TRUE)+
      labs(title = "Raw relationship suggests potential nonlinearity", 
           x=  "Temperature (F)", y = "log(Weekly_Sales)")
```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

```{r}

```

You can add options to executable code like this

```{r}

```

The `echo: false` option disables the printing of code (only output is displayed).
